<!-- 

    Authors: 
    Ria Rupini, 
    Maitri Majumder, 
    Ria Paul, 
    Prakash Dubey

 -->

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="/stylesheets/landingPage.css" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css"
      integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/js/all.min.js"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <title>Exam - Landing Page</title>
  </head>

  <body>
    <div class="container-fluid">
      <div class="row">
        <div class="offset-1 col-3 px-2 pt-5 mt-5 text-center">
          <h4 style="font-family: 'Montserrat', sans-serif">
            EXAMINATION DETAILS
          </h4>
          <div class="mt-5 py-3 exam_info">
            <h4 class="mt-3"><%- exam_details.examination_name %></h4>
            <hr />
            <h5>Subject Code: <%- exam_details.subject_code %></h5>
            <br />
            <h5>
              Duration: <%- duration.duration_hrs %>:<%- duration.duration_min
              %>:<%- duration.duration_sec %>
            </h5>
            <br />
            <h5 class="mb-3">Total Marks: <%- exam_details.total_marks %></h5>
          </div>
        </div>
        <div class="offset-1 col-6 offset-1">
          <div class="mt-5 pl-3 instruction_info" style="font-weight: bold;">
            <h2 class="text-center mt-3">INSTRUCTIONS</h2>
            <hr />
            <ol>
              <li>Do not refresh the page or leave the exam window.</li>
              <li>
                You will be warned if you dont abide by the rules and the test
                will be auto submitted if you navigate to other tab or window.
              </li>
              <li>
                Attempted question is marked green, questions marked for review
                are colored purple and questions skipped are marked red.
              </li>
            </ol>
            <hr />
            <div class="text-center mb-3">
              <a
                href="#"
                id="startTestButton"
                class="btn btn-info disabled"
              ></a>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- <div class="container mt-3">
      <div class="row">
        <div class="offset-2 col-8 offset-2">
          <div class="card text-center bg-light">
            <div class="card-header bg-info">
              <h4 class="text-light">Examination Details</h4>
            </div>
            <div class="card-body">
              <h4><%- exam_details.examination_name %></h4>
              <h5>Subject Code: <%- exam_details.subject_code %></h5>
              <h5>
                Duration: <%- duration.duration_hrs %>:<%- duration.duration_min
                %>:<%- duration.duration_sec %>
              </h5>
              <h5>Total Marks: <%- exam_details.total_marks %></h5>
            </div>
          </div>
        </div>
      </div>
      <div class="card mt-3">
        <div class="card-header">
          <h4>Instructions</h4>
        </div>
        <div class="card-body">
          <ol>
            <li>
              Lorem ipsum dolor, sit amet consectetur adipisicing elit. Sunt,
              tempora. Pariatur molestiae ea laudantium, eveniet ut est vel
              accusamus architecto dolorum recusandae amet deserunt voluptates
              distinctio tenetur sapiente, impedit ipsam, rerum ad sed atque!
              Error sapiente vel ex ipsa. Quidem beatae illum consectetur
              molestiae blanditiis optio dolore, recusandae asperiores maiores.
            </li>
            <li>
              Lorem ipsum dolor sit amet consectetur adipisicing elit. Non,
              beatae.
            </li>
            <li>
              Lorem ipsum dolor sit amet, consectetur adipisicing elit. Quasi
              aspernatur quaerat nostrum, beatae a praesentium?
            </li>
            <li>
              Lorem ipsum dolor, sit amet consectetur adipisicing elit. Unde,
              vero.
            </li>
          </ol>
        </div>
        <div class="card-footer text-center text-muted">
          <a href="#" id="startTestButton" class="btn btn-info disabled"></a>
        </div>
      </div>
    </div> -->

    <script>
      var startTestButton = document.getElementById("startTestButton");
      var examNotStarted = document.getElementById("examNotStarted");
      var start_time = "<%- exam_details.start_time %>";
      var end_time = "<%- exam_details.end_time %>";
      var present = "<%- present %>"
    
      function show_Elements() {
        if (present === "true" || invalid_time()) {
          startTestButton.className = "btn btn-info disabled";
          startTestButton.innerHTML = "Exam Unavailable";
        } else {
          startTestButton.className = "btn btn-info";
          startTestButton.setAttribute("href", window.location.href);
          startTestButton.innerHTML = "Start Test";
          var windowFeatures = `menubar=no,location=no,resizable=no,top=0,left=0,width=10000,height=10000,resizable=no,scrollbar=no`;

          startTestButton.addEventListener("click", (e) => {
            window.location.reload();
            window.open(
              e.target.getAttribute("href") + "/start",
              "popup",
              windowFeatures
            );
          });
        }
      }

      function invalid_time() {
        return (
          new Date(
            new Date(Date.now()).getFullYear(),
            new Date(Date.now()).getMonth(),
            new Date(Date.now()).getDate(),
            new Date(Date.now()).getHours(),
            new Date(Date.now()).getMinutes()
          ).getTime() < new Date(start_time).getTime() ||
          new Date(
            new Date(Date.now()).getFullYear(),
            new Date(Date.now()).getMonth(),
            new Date(Date.now()).getDate(),
            new Date(Date.now()).getHours(),
            new Date(Date.now()).getMinutes()
          ).getTime() > new Date(end_time).getTime()
        );
      }

      window.addEventListener("load", () => {
        show_Elements();
      });
    </script>
    <script
      src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
      integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-Piv4xVNRyMGpqkS2by6br4gNJ7DXjqk09RmUpJ8jgGtD7zP9yug3goQfGII0yAns"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
